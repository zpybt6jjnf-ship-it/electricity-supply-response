# Electricity Supply Response

## Data Pipeline

- **Single source of truth**: `data/audit_all_data.csv`. All numbers live here.
- **JSON files are build artifacts**: The 5 files in `data/verified/` are generated by `python3 data/build_from_csv.py`. Never hand-edit them.
- **Workflow for data changes**: Edit the CSV → run `npm run data:validate` → run `npm run data:build` → verify with `npm run data:audit`
- **METHODOLOGY.md** contains prose descriptions of the same numbers. When CSV values change, update the corresponding sections in METHODOLOGY.md and src/components/MethodologyNotes.tsx.
- **DATA_SOURCES.md** defines the authoritative source for each field, where to download it, and the annual refresh procedure. Consult it when updating the CSV for a new year.

## Dev

- `npm run dev` — Vite dev server
- `npm run build` — TypeScript check + production build
- `npm run data:build` — Regenerate JSON from CSV
- `npm run data:validate` — Check CSV for errors
- `npm run data:audit` — Generate HTML audit table

## Stack

React 18 + TypeScript + visx (D3 wrapper) + Vite. No backend.
